/**
 * angular-ui-codemirror - This directive allows you to add CodeMirror to your textarea elements.
 * @version v0.1.4 - 2014-07-04
 * @link http://angular-ui.github.com
 * @license MIT
 */
"use strict";angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",["uiCodemirrorConfig",function(a){return{restrict:"EA",require:"?ngModel",priority:1,compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror need CodeMirror to work... (o rly?)");return function(b,c,d,e){function f(a){for(var b in a)a.hasOwnProperty(b)&&i.setOption(b,a[b])}var g,h,i,j;if(j=c.text(),"TEXTAREA"===c[0].tagName)throw new Error("NOPE");c.html(""),i=new window.CodeMirror(function(a){c.append(a)},{value:j}),g=a.codemirror||{},h=angular.extend({},g,b.$eval(d.uiCodemirror),b.$eval(d.uiCodemirrorOpts)),f(h),d.uiCodemirror&&b.$watch(d.uiCodemirror,f,!0),e&&(e.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),e.$render=function(){var a=e.$viewValue||"";i.setValue(a)},i.on("change",function(a){var c=a.getValue();c!==e.$viewValue&&b.$apply(function(){e.$setViewValue(c)})})),d.uiRefresh&&b.$watch(d.uiRefresh,function(a,b){a!==b&&i.refresh()}),b.$on("CodeMirror",function(a,b){if(!angular.isFunction(b))throw new Error("the CodeMirror event requires a callback function");b(i)}),angular.isFunction(h.onLoad)&&h.onLoad(i)}}}}]);